<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Blog</title>
    <description>Bienvenido a mi espacio web personal</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/sitemap.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Sun, 05 May 2019 15:03:28 +0200</pubDate>
    <lastBuildDate>Sun, 05 May 2019 15:03:28 +0200</lastBuildDate>
    <generator>Jekyll v3.8.5</generator>
    
      <item>
        <title>fotogrametria_mobil</title>
        <description>&lt;div class=&quot;sketchfab-embed-wrapper&quot;&gt;&lt;iframe width=&quot;640&quot; height=&quot;480&quot; src=&quot;https://sketchfab.com/models/513d185fd69440a28594a5ec130fc7ca/embed&quot; frameborder=&quot;0&quot; allow=&quot;autoplay; fullscreen; vr&quot; mozallowfullscreen=&quot;true&quot; webkitallowfullscreen=&quot;true&quot;&gt;&lt;/iframe&gt;

&lt;p style=&quot;font-size: 13px; font-weight: normal; margin: 5px; color: #4A4A4A;&quot;&gt;
    &lt;a href=&quot;https://sketchfab.com/3d-models/banco-bq-513d185fd69440a28594a5ec130fc7ca?utm_medium=embed&amp;amp;utm_source=website&amp;amp;utm_campaign=share-popup&quot; target=&quot;_blank&quot; style=&quot;font-weight: bold; color: #1CAAD9;&quot;&gt;Banco Bq&lt;/a&gt;
    by &lt;a href=&quot;https://sketchfab.com/joancalad?utm_medium=embed&amp;amp;utm_source=website&amp;amp;utm_campaign=share-popup&quot; target=&quot;_blank&quot; style=&quot;font-weight: bold; color: #1CAAD9;&quot;&gt;joancalad&lt;/a&gt;
    on &lt;a href=&quot;https://sketchfab.com?utm_medium=embed&amp;amp;utm_source=website&amp;amp;utm_campaign=share-popup&quot; target=&quot;_blank&quot; style=&quot;font-weight: bold; color: #1CAAD9;&quot;&gt;Sketchfab&lt;/a&gt;
&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;https://skfb.ly/6KoxL&lt;/p&gt;
</description>
        <pubDate>Sat, 26 Jan 2019 00:00:00 +0100</pubDate>
        <link>http://localhost:4000/fotogrametria/2019/01/26/fotogrametria_mobil.html</link>
        <guid isPermaLink="true">http://localhost:4000/fotogrametria/2019/01/26/fotogrametria_mobil.html</guid>
        
        
        <category>fotogrametria</category>
        
      </item>
    
      <item>
        <title>Cómo hacer una imagen 360 con Blender</title>
        <description>&lt;p&gt;¿Por qué hacer una imagen 360 de una malla si ya tengo un modelo 3D?&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Puede que nos encontremos con algún espacio en el que realizar una imagen 360 es impracticable, pero si podamos generar un modelo fotogramétrico&lt;/li&gt;
  &lt;li&gt;Nos piden una vista o recorrido virtual del espacio que hemos generado&lt;/li&gt;
  &lt;li&gt;Es más simple que un visor 3D. La gente está más acostumbrada a mover una 360 que un visor 3D&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;realizar-imágenes-360-con-blender-a-partir-de-una-malla&quot;&gt;Realizar imágenes 360 con Blender a partir de una malla&lt;/h3&gt;

&lt;p&gt;Lo primero que tenemos que hacer es configurar la cámara con la que vamos a realizar la imagen.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Seleccionamos la cámara&lt;/li&gt;
  &lt;li&gt;En apartado &lt;em&gt;Scene &amp;gt; Resolution&lt;/em&gt; siempre le vamos a dar el doble a la X; por ejemplo x: 2048 y: 1024&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;../static/projects/360_blender/resolution.PNG&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Desde el apartado &lt;em&gt;Camera&lt;/em&gt;  seleccionamos &lt;em&gt;Panoramic, Type: equirrectangular&lt;/em&gt; y escogemos una longitud focal de 8mm por ejemplo, como si se tratase un ojo de pez.
&lt;img src=&quot;../static/img/360_blender/panoramic.PNG&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Colocamos la cámara de donde queramos que se realice la imagen 360 y le damos a render&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;compartir-nuestra-imagen&quot;&gt;Compartir nuestra imagen&lt;/h3&gt;

&lt;p&gt;Como ya expliqué en un post anterior &lt;a href=&quot;https://joancano.github.io/fotograf%C3%ADa/2019/01/02/360-photos.html&quot;&gt;Crear y visualizar imágenes 360&lt;/a&gt;, hay varias maneras de compartir nuestra imagen. En este caso voy a tomar el camino de publicar la image mediante &lt;a href=&quot;https://forgejs.org/#home&quot;&gt;ForgeJS&lt;/a&gt;.&lt;/p&gt;

&lt;h4 id=&quot;imagen-360&quot;&gt;&lt;a href=&quot;../static/360/projectes/banco/index.html&quot;&gt;IMAGEN 360&lt;/a&gt;&lt;/h4&gt;
</description>
        <pubDate>Sun, 20 Jan 2019 00:00:00 +0100</pubDate>
        <link>http://localhost:4000/360/2019/01/20/360_Blender.html</link>
        <guid isPermaLink="true">http://localhost:4000/360/2019/01/20/360_Blender.html</guid>
        
        
        <category>360</category>
        
        <category>360</category>
        
      </item>
    
      <item>
        <title>Cómo crear tiles</title>
        <description>&lt;p&gt;Algunas veces necesitamos compartir un trabajo que hemos hecho, ya sea mediante dron, fotogrametría, o alguna capa raster que tiene un tamaño que puede hacer inviable el compartirla.&lt;/p&gt;

&lt;p&gt;Es en estos casos cuando “cortar” estas imágenes u ortomosaicos puede ayudarnos a compartirlos o publicarlos de una manera más eficaz, normalmente mediante un Tile Map Server (TMS).&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Tilear&lt;/em&gt; una imagen consiste básicamente en dividir en pequeños mosaicos pre-renderizados para que la carga del cliente web sea mucho más rápida.&lt;/p&gt;

&lt;p&gt;Con Python y GDAL es muy sencillo, puesto que podemos dividir el ráster de entrada en la estructura que nos interesa. A continuación vamos a ver ejemplos de los que más ultilizo:&lt;/p&gt;

&lt;p&gt;Un breve inciso:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;En el caso de que tengas windows has de instalar &lt;a href=&quot;https://www.gdal.org/&quot;&gt;gdal&lt;/a&gt; para windows. Luego, podrás ejecutar gdal2tiles desde la OsgeoShell o desde la carpeta donde tengas gdal2tiles.exe&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Si utilizas Linux, instálate gdal a través de tu terminal, y solo tendrás que ejecutar el mismo comando desde ella.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;ejemplos-de-uso-de-gdal2tiles&quot;&gt;Ejemplos de uso de gdal2tiles&lt;/h3&gt;

&lt;h4 id=&quot;generar-un-tms-básico&quot;&gt;Generar un TMS básico&lt;/h4&gt;

&lt;p&gt;Ejecuntando el siguiente comando obtendremos la estructura de &lt;a href=&quot;https://openlayers.org/&quot;&gt;Openlayers&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# Linux
gdal2tiles.py raster.tif

# Windows
gdal2tiles.exe raster.tif
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;generar-un-tms-basado-en-google&quot;&gt;Generar un TMS basado en Google&lt;/h4&gt;

&lt;p&gt;Generar KML para Google Earth: predeterminado para el perfil ‘geodésico’ y ‘ráster’ en EPSG: 4326. Para un conjunto de datos con diferentes proyecciones usar con precaución!&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# Linux
gdal2tiles.py -k -p geodetic raster.tif

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;generar-un-tms-para-una-imagen-sin-coordenadas&quot;&gt;Generar un TMS para una imagen SIN coordenadas&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# Linux
gdal2tiles.py -p raster image.jpg

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Tue, 15 Jan 2019 00:00:00 +0100</pubDate>
        <link>http://localhost:4000/gis/2019/01/15/tiles.html</link>
        <guid isPermaLink="true">http://localhost:4000/gis/2019/01/15/tiles.html</guid>
        
        
        <category>gis</category>
        
      </item>
    
      <item>
        <title>Cómo hacer imágenes Gigapíxel</title>
        <description>&lt;p&gt;La curiosidad de esta semana ha sido cómo hacer imágenes Gigapíxel..&lt;/p&gt;

&lt;p&gt;En el último post que escribí, hablaba sobre cómo hacer imágenes 360. Hacer imágenes Gigapixel no es muy diferente.&lt;/p&gt;

&lt;p&gt;El primer paso es hacer las fotos, pero ¿cómo?. Si os acordáis, para hacer las imágenes para la 360, debíamos tener un % de solape entre imágenes, además de cubrir toda la esfera.&lt;/p&gt;

&lt;p&gt;El proceso para realizar la gigapíxel es similar. Si disponemos de una cámara con un objetivo 14-70mm, debemos tomar las fotos con la máxima distancia focal, en este caso 70mm. Es decir, tomaremos TODAS las imágenes con la mayor longitud focal posible, o decidiremos la &lt;em&gt;f&lt;/em&gt; según el nivel de detalle que queramos obtener.&lt;/p&gt;

&lt;p&gt;En este momento en el que ya sepamos cómo disparar las fotos, tenemos dos vías disponibles para ayudar a conseguir nuestras imágenes y que no se nos quede ningún hueco en la imagen final:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;La primera opción es disparar manualmente, por lo que se trata de hacer un rompecabezas de nuestra imagen final, por ejemplo eligiendo dos puntos que actúen de principio y fin (tanto longitudinal como latitudinalmente).&lt;/li&gt;
  &lt;li&gt;Comprar un brazo robótico que dispare y coloque la cámara por nosotros.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;El siguiente paso sería construir la gigapixel, por lo que podríamos seguir los mismos pasos que se utilizaron en el post anterior &lt;a href=&quot;https://joancano.github.io/fotografía/2019/01/02/360-photos.html&quot;&gt;cómo hacer fotos 360&lt;/a&gt;, pero en cambio de elegir una proyección cilíndrica elegiríamos la plana.&lt;/p&gt;

&lt;p&gt;El último paso sería compartir la imagen. Como se trata de una imagen lateralmente muy ancha necesitaremos un visor que nos permita movernos a través de ella, y fluidamente.&lt;/p&gt;

&lt;p&gt;He probado muchos software.. ¡MUCHOS! estando la mayoría de ellos descontinuados. Recomiendo 2:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;GDAL + Leaflet (opción Open Source)&lt;/li&gt;
  &lt;li&gt;Panotour (comercial)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Para utilizar GDAL y Leaflet en Linux, instalaremos GDAL:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$ sudo apt install gdal-bin&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Una vez que tengamos GDAL instalado, debemos ejecutar en el terminal el comando:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;$ gdal2tiles -p raster ourImage.jpg ourDestinyFolder&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Y ya tendremos nuestro visor !!&lt;/p&gt;

&lt;p&gt;Para que GDAL cree un html con Leaflet y no OL automáticamente, incluir &lt;em&gt;-l&lt;/em&gt; :&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;gdal2tiles.py -l -p raster ourImage.jpg ourDestinyFolder&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Todavía no entiendo el por qué, pero cuando he procesado los formatos png y tiff, el resultado ha sido inesperado, me genera los tiles con cambios cromáticos. Por lo que recomiendo procesar este tipo de imágenes sin ningún tipo de sistema de coordenadas y en formato jpg!&lt;/p&gt;

&lt;p&gt;Pd: aquí algunos de los visores hechos:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://files.tecnitop.com/usuarios/joan/wordpress/tourMP.html&quot;&gt;A partir de malla&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;../static/gigaBernia/gp_bernia.html&quot;&gt;Gigapixel de la Serra de Bèrnia&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Fri, 11 Jan 2019 00:00:00 +0100</pubDate>
        <link>http://localhost:4000/fotografia/2019/01/11/gigapixel.html</link>
        <guid isPermaLink="true">http://localhost:4000/fotografia/2019/01/11/gigapixel.html</guid>
        
        
        <category>fotografia</category>
        
      </item>
    
      <item>
        <title>Cómo hacer visores con Panellum</title>
        <description>&lt;p&gt;Tenemos que tener 4 archivos. Entre ellos están el JS y CSS que se deben descargar de la &lt;a href=&quot;https://pannellum.org/&quot;&gt;página web&lt;/a&gt;. El html lo tenemos que construir nosotros y como no, la imagen también ;).&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;panellum.html&lt;/li&gt;
  &lt;li&gt;panellum.js&lt;/li&gt;
  &lt;li&gt;panellum.css&lt;/li&gt;
  &lt;li&gt;imagen&lt;/li&gt;
&lt;/ul&gt;

&lt;iframe width=&quot;800&quot; height=&quot;500&quot; src=&quot;../static/panos/panellum.html&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;Y este sería el código html, fijaros en el contenedor ‘panorama’:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;html&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;lang=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;en&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;

&lt;span class=&quot;nt&quot;&gt;&amp;lt;head&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;charset=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;http-equiv=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;X-UA-Compatible&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;content=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;IE=edge&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;viewport&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;content=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;width=device-width, initial-scale=1&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;author&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;content=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;joan&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;nt&quot;&gt;&amp;lt;title&amp;gt;&lt;/span&gt;Guate&lt;span class=&quot;nt&quot;&gt;&amp;lt;/title&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;nt&quot;&gt;&amp;lt;link&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;rel=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;stylesheet&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;pannellum.css&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;

     &lt;span class=&quot;nt&quot;&gt;&amp;lt;style&amp;gt;&lt;/span&gt;
     &lt;span class=&quot;nt&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;html&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
       &lt;span class=&quot;nl&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;100%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
       &lt;span class=&quot;nl&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;100%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
       &lt;span class=&quot;nl&quot;&gt;margin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
     &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;#panorama&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nl&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;100%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;nl&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;100%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/style&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;pannellum.js&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt;

&lt;span class=&quot;nt&quot;&gt;&amp;lt;/head&amp;gt;&lt;/span&gt;

&lt;span class=&quot;nt&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt;

  &lt;span class=&quot;nt&quot;&gt;&amp;lt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;panorama&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;script&amp;gt;&lt;/span&gt;
		  &lt;span class=&quot;nx&quot;&gt;pannellum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;viewer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'panorama'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;s2&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;equirectangular&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
			&lt;span class=&quot;s2&quot;&gt;&quot;title&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Escuelita&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
			&lt;span class=&quot;s2&quot;&gt;&quot;author&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Joan Cano&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;s2&quot;&gt;&quot;panorama&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;pano2.jpg&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
			&lt;span class=&quot;s2&quot;&gt;&quot;compass&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;
			&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;

&lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;

&lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Fri, 04 Jan 2019 00:00:00 +0100</pubDate>
        <link>http://localhost:4000/fotografia/2019/01/04/simplePanos.html</link>
        <guid isPermaLink="true">http://localhost:4000/fotografia/2019/01/04/simplePanos.html</guid>
        
        
        <category>fotografia</category>
        
      </item>
    
      <item>
        <title>Crear y visualizar imágenes 360</title>
        <description>&lt;p&gt;Las vacaciones a vaces aburren y dan mucho para pensar, en este caso me dió por las imágenes 360, para una biblioteca personal, quizás un trabajo, por que tenía que sacarle partido a un Parrot Anafi.&lt;/p&gt;

&lt;p&gt;Después unas búsquedas, tenía algunas dudas:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;¿Qué software necesitaría?&lt;/li&gt;
  &lt;li&gt;Código libre / o gratuita.&lt;/li&gt;
  &lt;li&gt;Buenos resultados en el stitching y calidad en la foto final.&lt;/li&gt;
  &lt;li&gt;¿A futuro? Por ejemplo las visitas virtuales.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Entonces, estos fueron los programas que revisé:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://stitchpanorama.sourceforge.net/&quot;&gt;Stitch Panorama: a GIMP Plug-in&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://hugin.sourceforge.net/&quot;&gt;Hugin&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.shallowsky.com/software/pandora/&quot;&gt;Pandora: a GIMP Plugin for Making Panoramas&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://es.shop.gopro.com/EMEA/softwareandapp/gopro-fusion-studio-app/fusion-studio.html&quot;&gt;/gopro-fusion-studio&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://wiki.panotools.org/Main_Page&quot;&gt;panotools&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://forgejs.org/&quot;&gt;ForgeJS&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.kolor.com/panotour-viewer-download/&quot;&gt;Panotour Viewer&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.gigapan.com/cms/support/download-gigapan-stitch&quot;&gt;Gigapan&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.ptgui.com/&quot;&gt;PTGui&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://webuser.hs-furtwangen.de/~dersch/PTStitcherNG/PTStitcherNG0.4.html&quot;&gt;PTsticherNG&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://pannellum.org/&quot;&gt;Panellum&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;La mejor opción de código abierto fue &lt;a href=&quot;http://hugin.sourceforge.net/&quot;&gt;Hugin&lt;/a&gt;, por supuesto, pero Hugin software tiene un ligero problema cuando quieres ir rápido o no gastar demasiado tiempo o porque eres un poco vago. El problema es que la mayoría de las veces tienes que poner el puntos de control, aburrido no?&lt;/p&gt;

&lt;p&gt;Entonces, estuve revisando el software comercial. Parece que una de las mejores opciones es Autopano, pero también tiene un problema … no es gratis, y desde 2018 no se mantendrá.&lt;/p&gt;

&lt;p&gt;¡¡Pero hay una solución!!&lt;/p&gt;

&lt;p&gt;Autopano, en su versión gratuita puede alinear las imágenes, y es REALMENTE BUENO, ¡incluso puede exportar la alineación en el formato de Hugin!&lt;/p&gt;

&lt;p&gt;Entonces solo se tiene que exportar el formato con el que trabaja hugin y procesar la foto 360 en Hugin sin perder resolución.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../static/img/img360/detectar.png&quot; alt=&quot;000&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../static/img/img360/align.png&quot; alt=&quot;000&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../static/img/img360/panotools.png&quot; alt=&quot;000&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../static/img/img360/file.png&quot; alt=&quot;000&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../static/img/img360/salida.png&quot; alt=&quot;000&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Después de crear la imagen 360, el siguiente paso es publicar o compartir la imagen, pero no encontré un repositorio que me gustase o fuese totalmente libre … Entonces, por qué no crear nuestro propio repositorio :), ¿cómo? Con la ayuda de Github o Gitlab.&lt;/p&gt;

&lt;p&gt;Luego, podemos usar el siguiente software y cargarlo a Github: &lt;a href=&quot;https://forgejs.org&quot;&gt;ForgeJS&lt;/a&gt;, que solo tenemos que descargar, seleccionar el tipo de proyecto que queremos y luego cambiar el código del &lt;em&gt;config.json&lt;/em&gt; por alguno de los proyectos de la carpeta &lt;em&gt;/samples/projects/&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Este es el resultado:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;../static/360/projectes/serrella/index.html&quot;&gt;Serrella&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;../static/360/projectes/castellet/index.html&quot;&gt;Castellet&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;../static/360/projectes/polop/index.html&quot;&gt;Polop&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Y esto, los archivos que subo a Github:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../static/img/img360/forge.png&quot; alt=&quot;000&quot; /&gt;&lt;/p&gt;

&lt;p&gt;You can check the project &lt;a href=&quot;https://github.com/JoanCano/joancano.github.io/tree/master/_site/360&quot;&gt;here&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Wed, 02 Jan 2019 00:00:00 +0100</pubDate>
        <link>http://localhost:4000/fotografia/2019/01/02/360-photos.html</link>
        <guid isPermaLink="true">http://localhost:4000/fotografia/2019/01/02/360-photos.html</guid>
        
        
        <category>fotografia</category>
        
      </item>
    
      <item>
        <title>Crear y visualizar nubes de puntos 3D con Potree!</title>
        <description>&lt;p&gt;En el siguiente post se pretende mostrar una potente herramienta open source con la cual es realmente sencillo visualizar y servir nubes de puntos desde nuestro navegador.&lt;/p&gt;

&lt;h2 id=&quot;qué-es-potree&quot;&gt;¿Qué es Potree?&lt;/h2&gt;
&lt;p&gt;A grandes rasgos, &lt;a href=&quot;www.potree.org&quot;&gt;Potree&lt;/a&gt; se trata de un software de código abierto basado en WebGL, capaz de renderizar grandes nubes de puntos.&lt;/p&gt;

&lt;p&gt;En su &lt;a href=&quot;www.potree.org&quot;&gt;página web&lt;/a&gt; se pueden comprobar varios ejemplos de nubes de puntos obtenidas por fotogrametría o escáner.&lt;/p&gt;

&lt;p&gt;Está diseñado para trabajar con nubes de puntos en formato LAS, por lo que en el caso de que queramos transformar una nube de puntos, por ejemplo obtenida por fotogrametría, ésta la tendremos que transformar previamente a LAS para poder transformar la nube de puntos al formato con el que trabaja Potree (octrees).&lt;/p&gt;

&lt;h2 id=&quot;descarga-del-software&quot;&gt;Descarga del software&lt;/h2&gt;

&lt;p&gt;Para proceder a utilizar Potree, descargaremos el software para convertir el formato LAS a los octrees con los que trabaja Potree &amp;gt; &lt;a href=&quot;https://github.com/potree/PotreeConverter/releases&quot;&gt;https://github.com/potree/PotreeConverter/releases&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;En la página se encuentra PotreeConverter, que se trata del conversor de LAS a octrees y el software en sí (source code). Sin embargo, solo nos hará falta PotreeConverter.&lt;/p&gt;

&lt;h2 id=&quot;cómo-ejecutarlo&quot;&gt;Cómo ejecutarlo&lt;/h2&gt;

&lt;p&gt;Antes de empezar, conviene instalar un servidor web para poder visualizar la nube de puntos sin tener que subirla a un servidor como tal.&lt;/p&gt;

&lt;p&gt;Como “simulador” de servidor web se utilizará &lt;a href=&quot;https://www.apachefriends.org/de/index.html&quot;&gt;Xampp&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Una vez se tiene todo descomprimido e instalado, se procede a transformar la nube de puntos. Para ello, se abre el cmd y se escribe la siguiente línea de código.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;./PotreeConverter.exe C:/pointcloud.las -o C:/xampp/htdocs/potree --generate-page pageName
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Donde:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;./PotreeConverter.exe&lt;/code&gt; se trata del ejecutable que se ha descargado.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;C:/pointcloud.las&lt;/code&gt; es la nube de puntos que queremos transformar.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;C:/xampp/htdocs/potree&lt;/code&gt; es la ruta donde se va a guardar.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;pageName&lt;/code&gt; Es el nombre que le asignaremos al archivo de salida&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;em&gt;Queda claro que las rutas pueden variar según dónde hayamos colocado los archivos.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Una vez se ejecute nos debe aparecer una ventana como la siguiente, la cual indica que el proceso se está realizando.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../static/img/imgPotree/resultado.png&quot; alt=&quot;CMD&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Cuando se haya realizado el proceso, es muy importante que los archivos generados se encuentren dentro de &lt;code class=&quot;highlighter-rouge&quot;&gt;C:\xampp\htdocs&lt;/code&gt; para poder visualizar la nube de puntos en el navegador:&lt;/p&gt;

&lt;p&gt;De manera que solo quedará abrir y visualizar la nube de puntos desde una ruta similar a la siguiente:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://localhost/potree/pageName.html&quot;&gt;http://localhost/potree/pageName.html&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;una-pequeña-contribución&quot;&gt;Una pequeña contribución&lt;/h2&gt;

&lt;p&gt;Abrir la consola puede paracer algo tedioso, por lo que se ha creado el siguiente &lt;a href=&quot;https://github.com/JoanCano/potreeGUI/blob/master/PotreeConverter.exe&quot;&gt;ejecutable&lt;/a&gt; para evitar tener que escribir en la consola de Windows.&lt;/p&gt;

&lt;p&gt;Al ejecutar potreGUI nos aparecen las siguientes ventanas:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Nos pregunta que nombre le damos al archivo&lt;/li&gt;
  &lt;li&gt;El archivo LAS que queremos transformar&lt;/li&gt;
  &lt;li&gt;El directorio donde queremos guardarlo (C:\xampp\htdocs)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;../static/img/imgPotree/1.PNG&quot; alt=&quot;nombre&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../static/img/imgPotree/2.png&quot; alt=&quot;LAS&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../static/img/imgPotree/3.png&quot; alt=&quot;Guardar&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ejemplo-práctico-con-una-nube-de-puntos-lidar-del-pnoa&quot;&gt;Ejemplo práctico con una nube de puntos LiDAR del PNOA&lt;/h2&gt;

&lt;p&gt;Para mostrar el resultado que puede obtenerse con una nube de puntos LAS, se han utilizado 6 hojas LiDAR-PNOA que a su vez han sido unidas en CloudCompare.&lt;/p&gt;

&lt;p&gt;Aquí tenéis el resultado. Suerte!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../static/img/imgPotree/resultado2.PNG&quot; alt=&quot;CMD&quot; /&gt;&lt;/p&gt;
</description>
        <pubDate>Sat, 13 Jan 2018 00:00:00 +0100</pubDate>
        <link>http://localhost:4000/modelos3d/2018/01/13/potree.html</link>
        <guid isPermaLink="true">http://localhost:4000/modelos3d/2018/01/13/potree.html</guid>
        
        
        <category>modelos3D</category>
        
      </item>
    
      <item>
        <title>Cómo instalar OpenDroneMap</title>
        <description>&lt;p&gt;En primer lugar, para trabajar con ODM, será necesario instalar previamente Docker,
ya que ODM corre a través de Docker.&lt;/p&gt;

&lt;p&gt;Instalar Docker es muy sencillo, con los siguientes pasos (para Ubuntu 16.04, en el
caso de que tengas otra versión dirígete a la &lt;a href=&quot;https://docs.docker.com/engine/installation/linux/docker-ee/ubuntu/&quot;&gt;página oficial&lt;/a&gt;).&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# Actualizamos&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get update

&lt;span class=&quot;c&quot;&gt;# Instalamos Docker&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get install docker.io

&lt;span class=&quot;c&quot;&gt;# Comprobamos que está instalado&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;docker run hello-world
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Una vez tenemos Dockers instalado, para conseguir tener WebODM nos hará falta Python y Git.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get install python
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get install git
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;instalación-de--webodm&quot;&gt;Instalación de  WebODM&lt;/h3&gt;

&lt;p&gt;Descarga WebODM de &lt;a href=&quot;https://github.com/OpenDroneMap/WebODM&quot;&gt;https://github.com/OpenDroneMap/WebODM&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Entra a la carpeta y ejecútalo&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;WebODM
./webodm.sh start
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Listo!&lt;/strong&gt;
&lt;img src=&quot;../static/img/odm.png&quot; alt=&quot;WebODM&quot; /&gt;&lt;/p&gt;
</description>
        <pubDate>Tue, 28 Nov 2017 00:00:00 +0100</pubDate>
        <link>http://localhost:4000/fotogrametria/2017/11/28/ODM.html</link>
        <guid isPermaLink="true">http://localhost:4000/fotogrametria/2017/11/28/ODM.html</guid>
        
        
        <category>fotogrametria</category>
        
      </item>
    
      <item>
        <title>Cómo realizar un suavizado de datos con el filtro Savitzky-Golay y R</title>
        <description>&lt;p&gt;El filtro &lt;em&gt;Savitzky-Golay&lt;/em&gt; se utiliza normalmente para el suavizado de datos, ajustando un polinomio con al menos k+1 puntos equidistantes para determinar el nuevo valor de cada punto.&lt;/p&gt;

&lt;p&gt;En teledetección, cuando se trabaja con firmas espectrales se suele utilizar este filtro por conservar las características de la distribución inicial, los máximos y mínimos relativos y el ancho entre picos. El filtro simula una ventana que se desliza por los datos, suavizándolos a partir de los datos de la ventana.&lt;/p&gt;

&lt;p&gt;Para poder emplearlo en &lt;a href=&quot;https://cran.r-project.org/&quot;&gt;R&lt;/a&gt;, necesitaremos el paquete &lt;code class=&quot;highlighter-rouge&quot;&gt;signal&lt;/code&gt;, el cual contiene funciones de procesamiento compatibles con &lt;em&gt;Matlab/Octvave&lt;/em&gt;, como filtros, funciones de filtrado, visualización de modelos de filtros, interpolación, etc. Las funciones que se van a emplear son:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;em&gt;sgolay&lt;/em&gt;, para calcular los coeficientes.&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;filter&lt;/em&gt;, para aplicar los coeficientes a los datos, con un ajuste de mínimos cuadrados (cuadrado de las diferencias entre los valores calculados y observados).&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;cómo-establecer-los-parámetros-de-filtrado&quot;&gt;Cómo establecer los parámetros de filtrado&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;p&lt;/code&gt;  es el orden del polinomio. Si es alto, gestiona mejor los rasgos espectrales estrechos, pero suaviza menos los anchos.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;n&lt;/code&gt; es la longitud del filtro (siempre impar). Entre 1 y 2 la anchura del rasgo m?s estrecho en los datos.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;m&lt;/code&gt; devuelve la derivada de los coeficientes de filtrado&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ts&lt;/code&gt; es el factor de escala de tiempo&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;establecer-el-directorio-de-trabajo&quot;&gt;Establecer el directorio de trabajo&lt;/h4&gt;

&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# Directorio de trabajo&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dir&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;setwd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/home/joan/TRATAMIENTO/&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;cargar-los-datos-y-crear-un-df&quot;&gt;Cargar los datos y crear un DF&lt;/h4&gt;

&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read.csv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;FIRMAS_REF.csv&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;header&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sep&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;,&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dec&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;,&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# Nótese que se transforman los vectores a factores, de lo contrario el filtro no funcionará&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data.frame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stringsAsFactors&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;visualizamos-las-gráficas-para-determinar-la-n&quot;&gt;Visualizamos las gráficas para determinar la &lt;em&gt;n&lt;/em&gt;&lt;/h4&gt;

&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;plot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Firma_1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;l&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Gr?fica firma 1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xlab&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;wavelength&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ylab&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Reflectividad&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;../static/img/firma1.png&quot; alt=&quot;plot&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Se escoge el ancho de entre la longitud de onda &lt;code class=&quot;highlighter-rouge&quot;&gt;737 - 748&lt;/code&gt; como rasgo más estrecho, de manera que su doble nos da una &lt;strong&gt;n de 21&lt;/strong&gt;.&lt;/p&gt;

&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;#install.packages(&quot;signal&quot;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;signal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# Calcular los coeficientes de filtro&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sg&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sgolay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# Se aplica el filtro con los coeficientes a nuestros datos&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;signal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Firma_1sg&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Firma_1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# Visualizamos el resultado&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ggplot2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plotsg&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ggplot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;geom_point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Firma_1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0.1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;geom_line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Firma_1sg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;col&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;red2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xlab&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Wavelength&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ylab&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Reflectancia&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;theme_light&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;plotsg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;../static/images/golay.png&quot; alt=&quot;golay&quot; /&gt;&lt;/p&gt;

&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# Exportamos como DF&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dfsg&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data.frame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Firma_1sg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write.csv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dfsg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;firmas_SG.csv&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Sat, 11 Nov 2017 00:00:00 +0100</pubDate>
        <link>http://localhost:4000/r/2017/11/11/sGolay.html</link>
        <guid isPermaLink="true">http://localhost:4000/r/2017/11/11/sGolay.html</guid>
        
        
        <category>R</category>
        
      </item>
    
      <item>
        <title>¿Cómo crearte un blog personal con Jekyll?</title>
        <description>&lt;p&gt;Hay muchas posibilidades para la creación de blogs personales, siendo Wordpress o Blogspot de los más utilizados, sin embargo, ¡hay alternativas!.&lt;/p&gt;

&lt;p&gt;Una de las que más me gusta es &lt;a href=&quot;https://jekyllrb.com/&quot;&gt;Jekyll&lt;/a&gt;, aunque &lt;a href=&quot;https://themes.gohugo.io/&quot;&gt;Hugo&lt;/a&gt; también es una buena opción. Jekyll es a grandes rasgos un generador de páginas web estáticas, con una serie de ventajas que lo diferencias de otros modos de hacerte un blog:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;La facilidad de edición de nuevos post mediante lenguaje markdown (en algún editor de escritorio como Atom o Haroopad), o a partir de otros editores web como &lt;a href=&quot;http://prose.io/&quot;&gt;prose.io&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;Tiene una rápida y fácil instalación que más abajo se detalla&lt;/li&gt;
  &lt;li&gt;Gran cantidad de &lt;a href=&quot;http://jekylltheme.org/&quot;&gt;temas/plantillas predefinidas&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;La posibilidad de alojarlo en páginas como Github o Gitlab, permitiendo tener un espacio en la web&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;En el caso de que queramos visualizar el resultado de nuestro blog, podemos montar Jekyll en nuestro ordenador (con linux) o servidor. Por otro lado, si el destino del blog es subirlo a github, no hace falta realizar este paso, tan solo hay que modificar los archivos necesarios y subir tus nuevos posts en formato markdown.&lt;/p&gt;

&lt;h3 id=&quot;pre-instalación-jekyll-requisitos&quot;&gt;Pre-instalación Jekyll. Requisitos&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Un SO GNU/Linux o macOS&lt;/li&gt;
  &lt;li&gt;Tener instalado git&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get install git
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;La versión de Ruby 2.1 o superior&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get install ruby ruby-dev make gcc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;ul&gt;
  &lt;li&gt;Las RubyGems. Si no tienes las RubyGems instaladas, puedes hacerlo manualmente descargándolas desde esta &lt;a href=&quot;https://rubygems.org/pages/download#formats&quot;&gt;página&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# Entrar (cd) a la carpeta descargada y descomprimida y ejecutar&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ruby setup.rb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;En el caso de que las tengas, únicamente actualízalas:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# Tienes que ser administrador o root&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;gem update &lt;span class=&quot;nt&quot;&gt;--system&lt;/span&gt;  
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Comprueba que GCC y Make se han instalado&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gcc &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt;
make &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;instalación-de-jekyll&quot;&gt;Instalación de Jekyll&lt;/h2&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# Instalación de Jekyll&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;gem install jekyll bundler

&lt;span class=&quot;c&quot;&gt;# Comprobar si se ha instalado bien&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;jekyll &lt;span class=&quot;nt&quot;&gt;--version&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;gem list jekyll

&lt;span class=&quot;c&quot;&gt;# Comprobar si bundle está instalado&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;bundle update jekyll
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;bundle &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;descargar-repositorios-y-realizar-cambios&quot;&gt;Descargar repositorios y realizar cambios&lt;/h3&gt;

&lt;p&gt;A modo de ejemplo voy a simular que descargo el repositorio donde tengo alojado mi blog, el cual es un fork de uno de los muchos temas de Jekyll.&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone https://github.com/JoanCano/joancano.github.io.git

&lt;span class=&quot;c&quot;&gt;# Entraría a la carpeta del blog&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;joancano.io/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;En este punto es cuando crearíamos el nuevo post dentro de la carpeta &lt;code class=&quot;highlighter-rouge&quot;&gt;_post&lt;/code&gt;, donde guardaremos las nuevas publicaciones. Estas deben deben seguir el siguiente formato:  &lt;code class=&quot;highlighter-rouge&quot;&gt;YEAR-MONTH-DAY-title.md&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;La carpeta &lt;code class=&quot;highlighter-rouge&quot;&gt;_site&lt;/code&gt; es donde se generarán los nuevos post una vez sean transformados por Jekyll.&lt;/p&gt;

&lt;p&gt;Cada post empezará de la siguiente manera, escrito en markdown:&lt;/p&gt;

&lt;div class=&quot;language-markdown highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nn&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#!markdown&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;layout&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;post&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Welcome&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Jekyll!&quot;&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;   &lt;span class=&quot;s&quot;&gt;2015-11-17 16:16:01 -0600&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;categories&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;jekyll update&lt;/span&gt;
&lt;span class=&quot;nn&quot;&gt;---&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h3 id=&quot;visualización-del-blog&quot;&gt;Visualización del blog&lt;/h3&gt;

&lt;p&gt;Como se ha descargado el blog desde Github, lo primero será iniciar el repositorio en git.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;joancano.github.io
git init
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Jekyll también viene con un servidor de desarrollo incorporado que te permitirá previsualizarlo cómo en tu navegador localmente.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;jekyll serve
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;En caso de que no nos permita visualizarlo, es por los permisos del navegador. Tenemos que activar el puerto 4000.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo ufw allow 4000
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Ya tenemos nuestro blog corriendo en &lt;a href=&quot;http://localhost:4000/joancano.github.io/&quot;&gt;local&lt;/a&gt;!. Ahora solo tendremos que subirlo a Github para poder tener nuestro blog en la web.&lt;/p&gt;
</description>
        <pubDate>Sat, 21 Oct 2017 00:00:00 +0200</pubDate>
        <link>http://localhost:4000/jekyll/2017/10/21/makeYourownBlog.html</link>
        <guid isPermaLink="true">http://localhost:4000/jekyll/2017/10/21/makeYourownBlog.html</guid>
        
        
        <category>jekyll</category>
        
      </item>
    
      <item>
        <title>Instalador aplicaciones post-formateo</title>
        <description>&lt;p&gt;Script básico en &lt;strong&gt;bash&lt;/strong&gt; para la instalación de los programas que suelo utilizar en Linux.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/bash&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get update

&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get install chromium-browser

&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get install inkscape

&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get install shutter

&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get install fish

&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get install gimp

&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get install synapse

&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get install geany

&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get install virtualbox

&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get install ruby-full

&lt;span class=&quot;c&quot;&gt;# QGIS&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;## autorizar clave repositorio&lt;/span&gt;
wget &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; - http://qgis.org/downloads/qgis-2017.gpg.key | gpg &lt;span class=&quot;nt&quot;&gt;--import&lt;/span&gt;
gpg &lt;span class=&quot;nt&quot;&gt;--fingerprint&lt;/span&gt; CAEB3DC3BDF7FB45
gpg &lt;span class=&quot;nt&quot;&gt;--export&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--armor&lt;/span&gt; CAEB3DC3BDF7FB45 | &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-key add -

&lt;span class=&quot;c&quot;&gt;# QGIS Latest Release&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;sh &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'echo &quot;# QGIS Latest Release
deb     http://qgis.org/ubuntugis $(xenial -sc) main
deb-src http://qgis.org/ubuntugis $(xenial -sc) main&quot; &amp;gt; /etc/apt/sources.list.d/qgis-latest.list'&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt update
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt; upgrade

&lt;span class=&quot;c&quot;&gt;# (2) QGIS y dependencias&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt install &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt; python-software-properties qgis python-qgis qgis-plugin-grass

&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get install keepassx

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;../static/scripts/installer.sh&quot;&gt;installer.sh&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Wed, 18 Oct 2017 00:00:00 +0200</pubDate>
        <link>http://localhost:4000/linux/2017/10/18/installer.html</link>
        <guid isPermaLink="true">http://localhost:4000/linux/2017/10/18/installer.html</guid>
        
        
        <category>linux</category>
        
      </item>
    
      <item>
        <title>Sumando segundos en metadatos de imágenes</title>
        <description>&lt;p&gt;Hace cierto tiempo, se me planteó la posibilidad de renombrar los metadatos de un grupo de imágenes
las cuales habían sido tomadas sin la fecha y hora.&lt;/p&gt;

&lt;p&gt;Saber la hora en la que se realizaron era necesario, puesto que todas estaban a 00:00:00, de manera
que la solución recaía en establecer una fecha y hora de inicio en todas, para luego ejecutar el siguiente &lt;strong&gt;script&lt;/strong&gt;
en el lenguaje de consola &lt;em&gt;bash&lt;/em&gt;.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/bash&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;0
&lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;i &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;do
	&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;fecha&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'00:00:'&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$a&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#	echo $fecha&lt;/span&gt;
	exiftool &lt;span class=&quot;nt&quot;&gt;-DateTimeOriginal&lt;/span&gt;+&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$fecha&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$i&lt;/span&gt;
	&lt;span class=&quot;nv&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;expr &lt;span class=&quot;nv&quot;&gt;$a&lt;/span&gt; + 2&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
	&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$a&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Establecer la misma hora a todas las imágenes es sencillo, utilizando la librería que se aprecia arriba (exiftool),
mediante la misma etiqueta -DateTimeOriginal.. Un ejemplo!&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;gt; exiftool &quot;-DateTimeOriginal+=Y:M:D h:m:s&quot; filename.png
&amp;gt; exiftool &quot;-DateTimeOriginal+=2017:10:8 5:30:7&quot; filename.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Obviamente, hemos de instalar exiftools…&lt;/p&gt;

&lt;p&gt;Luego, se coloca el ejecutable &lt;strong&gt;.sh&lt;/strong&gt; en la carpeta que contiene las imágenes donde se ejecuta
listando y renombrando con +2 segundos cada vez que recorre una imagen (las imágenes normalmente por su nombre están correctamente listadas en la carpeta).&lt;/p&gt;

&lt;p&gt;De esta manera, podemos ajustar una fecha/tiempo para tener un tiempo de disparo similar al que habría sido en realidad.&lt;/p&gt;
</description>
        <pubDate>Tue, 17 Oct 2017 00:00:00 +0200</pubDate>
        <link>http://localhost:4000/bash/2017/10/17/accountant.html</link>
        <guid isPermaLink="true">http://localhost:4000/bash/2017/10/17/accountant.html</guid>
        
        
        <category>bash</category>
        
      </item>
    
      <item>
        <title>Script en ArcPy para calcular superficies por su valor</title>
        <description>&lt;h3 id=&quot;mi-primer-script&quot;&gt;Mi primer Script&lt;/h3&gt;

&lt;p&gt;Cursando el Máster en TIG en la &lt;a href=&quot;http://unizar.es/&amp;quot;&amp;gt;Universidad de Zaragoza&quot;&gt;Universidad de Zaragoza&lt;/a&gt;, una de las asignaturas fue &lt;a href=&quot;https://www.python.org/&quot;&gt;Python&lt;/a&gt;. En ella hemos utilizado como intérprete &lt;a href=&quot;http://desktop.arcgis.com/es/arcmap/10.3/analyze/arcpy/what-is-arcpy-.htm&quot;&gt;ArcPy&lt;/a&gt; el cual tiene extensión en ArcGIS para analizar datos, conversión de datos, administración de datos y automatización de mapas, lo que ayuda a aumentar la productividad.&lt;/p&gt;

&lt;p&gt;Dejo aquí abajo el script. Se trata de un simple geoproceso que consiste en extraer de una capa de puntos cualquiera, el valor que se demanda de la suma de los píxeles que caen dentro de los puntos. De manera que itera, generando buffers, hasta que alcanza el valor que se le pide.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot;
---------------------------------------------------------------------------
Descripcion: El siguiente script determina el area que se requiere para una
    determinada actividad, en este caso el calculo de una biomasa de
    100000 ton/ha para poder emplazar una planta.
Funcionamiento: A partir de una capa de puntos (plantas.shp) que representa
    la localizacion de estas, se recrean areas de influencia hasta determinar
    la area que se requiere.
    El valor de cada area de influencia se calcula a partir de la suma
    del valor de los pixeles.
---------------------------------------------------------------------------
&quot;&quot;&quot;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Importo los modulos&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;arcpy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;arcpy&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;arcpy.sa&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Defino mi sistema de referencia espacial&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;sr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arcpy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SpatialReference&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;sr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;factoryCode&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;23030&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;sr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;arcpy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;outputCoordinateSystem&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sr&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Declaro la ruta y mi entorno de trabajo&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ruta&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;C:&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Users&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Joan-PC&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Desktop&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;Datos&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;arcpy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;workspace&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ruta&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Sobreescribir mis archivos&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;arcpy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;overwriteOutput&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Licencia&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;arcpy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CheckOutExtension&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Spatial&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# variables locales:&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;capa&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;plantas.shp&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;raster&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;prod&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;output&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;output&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;campo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;FID&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;miAcopio&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;acopio&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;existe&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Creo el campo que contendra el valor de biomasa&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;fieldList&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arcpy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ListFields&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;capa&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;field&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fieldList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;field&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;miAcopio&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;existe&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;existe&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;miAcopio&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot; existe&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;arcpy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AddField_management&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;capa&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;miAcopio&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;miAcopio&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot; agregado&quot;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Utilizo un cursor de busqueda para accedeer al valor de los distintos&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# campos de la tabla plantas, por fila y de manera independiente.&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;campos&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arcpy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UpdateCursor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;capa&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;campos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;entidad&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#  Defino la clausula -&amp;gt; FID = X&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;whereClause&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;{0} = {1}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;campo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;entidad&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# Creo una capa temporal con la seleccion&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;arcpy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MakeFeatureLayer_management&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;capa&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;currentMask&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;whereClause&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# Defino las variables dinamicas del bucle&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;distancia&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;500&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;densidad&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# Bucle, hasta que no tenga 100000 de aqui no sale&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;densidad&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;capaSalida&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;entidad&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;_&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;distancia&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;.shp&quot;&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;arcpy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Buffer_analysis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;currentMask&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;capaSalida&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;distancia&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;FULL&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;ROUND&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;NONE&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;PLANAR&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

                &lt;span class=&quot;n&quot;&gt;outRaster&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arcpy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sa&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ExtractByMask&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;raster&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;capaSalida&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;myArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arcpy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RasterToNumPyArray&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;outRaster&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nodata_to_value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;densidad&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;myArray&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;distancia&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;

                &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;buffer incompleto: &quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;densidad&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot; repite &quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;capaSalida&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# Cuando supere el valor, extraer el resultado en una capa nueva&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;densidad&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;salida&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arcpy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CopyFeatures_management&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;capaSalida&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;area_&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entidad&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;_&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;distancia&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;buffer completo: &quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;salida&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot; con: &quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;densidad&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot; valor&quot;&lt;/span&gt;

        &lt;span class=&quot;c&quot;&gt;# Ahora tengo que actualizar el campo con el valor de biomasa&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arcpy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;da&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UpdateCursor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;salida&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;miAcopio&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cursor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;row&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cursor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;densidad&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;cursor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;updateRow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;del&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cursor&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;del&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;campos&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/JoanCano/Joanproject/blob/master/python_gis/joan_script.py&quot;&gt;Download script&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Thu, 07 Sep 2017 00:00:00 +0200</pubDate>
        <link>http://localhost:4000/python/2017/09/07/pythonGis.html</link>
        <guid isPermaLink="true">http://localhost:4000/python/2017/09/07/pythonGis.html</guid>
        
        
        <category>python</category>
        
      </item>
    
      <item>
        <title>Lectura y decodificación de los metadatos en imágenes de la cámara Sequoia</title>
        <description>&lt;p&gt;Los metadatos son datos que nos proporcionan información sobre los datos, entre ellos los descriptivos, estructurales y administrativos.
Estos pueden ser escritos en iḿagenes como las que toma nuestra cámara, que ayudarán en el proceso posterior de producción a partir de palabras clave.&lt;/p&gt;

&lt;h3 id=&quot;tipos-de-metadatos-en-imágenes&quot;&gt;Tipos de metadatos en imágenes&lt;/h3&gt;

&lt;p&gt;Las imágenes pueden contener diferentes metadatos, regidos por las normas creadas por organizaciones encargadas de ello; algunas de estas normas son:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;IPTC&lt;/li&gt;
  &lt;li&gt;IPTC para XMP&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;XMP&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;EXIF&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;Dublin Core&lt;/li&gt;
  &lt;li&gt;PLUS&lt;/li&gt;
  &lt;li&gt;VRA&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;librerías-de-lectura-de-metadatos-exiftools&quot;&gt;Librerías de lectura de metadatos: Exiftools&lt;/h3&gt;
&lt;p&gt;Al haber tratado ya los metadatos de las imágenes de la &lt;a href=&quot;http://tecnitop.com/es/camaras-accesorios-y-software/&quot;&gt;Sequoia&lt;/a&gt;, avanzo la necesidad de interpretar metadatos del estandar &lt;a href=&quot;https://en.wikipedia.org/wiki/Extensible_Metadata_Platform#Free_software_and_open-source_tools_.28read.2Fwrite_support.29&quot;&gt;XMP&lt;/a&gt;, una marca registrada por Adobe Systems que cuando pasó a ser ISO, dejó se ser propietaria.&lt;/p&gt;

&lt;p&gt;Por lo tanto, necesitaremos buscar un software (libre) capaz de leer XMP, a continuación los que he probado:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.gimp.org/&quot;&gt;GIMP&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.digikam.org/&quot;&gt;digiKam&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.sno.phy.queensu.ca/~phil/exiftool/&quot;&gt;ExifTool&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.imagemagick.org/script/index.php&quot;&gt;ImageMagick&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;GIMP y ImageMagick vienen por defecto en Debian. Sin embargo Exiftool lo tenemos que instalar:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# instalar exiftool&lt;/span&gt;
 apt-cache install libimage-exiftool-perl
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;mostrar-los-metadatos-de-una-imagen&quot;&gt;Mostrar los metadatos de una imagen&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;exiftool imagen.tif
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;ImageMagick&lt;/strong&gt; también se puede ejecutar desde la terminal:&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;identify &lt;span class=&quot;nt&quot;&gt;-verbose&lt;/span&gt; imagen.tif
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;/multispectralcam/exiftool.txt&quot;&gt;Resultados exiftool&lt;/a&gt;, &lt;a href=&quot;/multispectralcam/imageMagick.txt&quot;&gt;Resultados ImageMagick&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h4 id=&quot;con-exiftools&quot;&gt;Con Exiftools&lt;/h4&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;system &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;exiftool /home/joan/multispectralcam/test/IMG_170825_082736_0004_NIR.TIF&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;exportar-metadatos-a-csv&quot;&gt;Exportar metadatos a csv&lt;/h4&gt;

&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;exiftool -n -csv /home/joan/multispectralcam/test/IMG_170825_082736_0004_NIR.TIF&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;intern&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read.csv&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;textConnection&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stringsAsFactors&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write.csv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/home/joan/Escritorio/test.csv&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;decodificar-formato-base64-mediante-python&quot;&gt;Decodificar formato Base64 mediante Python&lt;/h4&gt;

&lt;p&gt;Se pueden apreciar metadatados muy valiosos para la investigación, como:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Yaw, pitch y roll&lt;/li&gt;
  &lt;li&gt;Viñeteado&lt;/li&gt;
  &lt;li&gt;Valor de luminosidad&lt;/li&gt;
  &lt;li&gt;Calibraciones&lt;/li&gt;
  &lt;li&gt;Corriente oscura&lt;/li&gt;
  &lt;li&gt;etc…&lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;p&gt;Pero.. ¿Y la etiqueta &lt;strong&gt;IrradianceList&lt;/strong&gt;?&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Esta etiqueta viene codificada en &lt;strong&gt;Base64&lt;/strong&gt;, un sistema de numeración posicional que utiliza el 64 como base y carácteres ASCII (usa el rango entre A-Z, a-z y 0-9, más dos símbolos que pueden variar). De manera que tenemos la siguiente cadena de carácteres:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;U5UwEQAAAABaBa4CAQBkAHAJ6sLRfAHBo95bwBegMxEAAAAAnAXQAgEAZACLX+zCj/G+wImc0b/rrDYRAAAAAKIF0wIBAGQAltDqwi1DusAigqS/M8I5EQAAAADNBGgCAQBkANc958JGokfBxkHAPsbZPBEAAAAA+AP9AQEAZACYTeXCGYhEwV7Bsb833z8RAAAAAOQD8gEBAGQA21LqwrSgfcHvtz3ACeVCEQAAAADzA/oBAQBkAICY+cK6j6HBPJaJQLL3RREAAAAAbAO3AQEAZAC0rQPD67Hbwa0xNEE+CUkRAAAAAM8D6AEBAGQAS8j8wj+alsH7+SrBeA1MEQAAAAAPBYkCAQBkAA/iBMP/TBjCafi/wPkFTxEAAAAArgRZAgEAZABL0ATDLYzwwSFcr78KF1IRAAAAAI0FyAIBAGQAfjkBw6Iwc8FEj6LAcyRVEQAAAABsBbgCAQBkAJ/d+8K8cFbBgX6owA==
&lt;/code&gt;&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;Para poder decodificarlo se han utilizado una serie de librerías en &lt;a href=&quot;https://www.python.org/&quot;&gt;Python&lt;/a&gt;:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://smarnach.github.io/pyexiftool/&quot;&gt;exiftool&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.python.org/2/library/base64.html&quot;&gt;base64&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.python.org/2/library/struct.html&quot;&gt;struct&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/smarnach/pyexiftool/blob/master/exiftool.py&quot;&gt;exiftool.py&lt;/a&gt;. En el caso de que el script de error, hay que adjuntar esta librería.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Este es el script utilizado:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;exiftool&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;base64&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;struct&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;glob&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;os&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;tag&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;XMP:IrradianceList&quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;directorio&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'test'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;canales&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'GRE'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'RED'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'REG'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'NIR'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;canal&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;canales&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;files&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;glob&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;glob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;directorio&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'*'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;canal&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'*'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exiftool&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ExifTool&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;et&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;metadata&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;et&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_tag_batch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;files&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;c&quot;&gt;#print metadata&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file_metadata&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;decoded&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;base64&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b64decode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_metadata&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;n&quot;&gt;index&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;decoded&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unpack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;qHHHHfff&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;decoded&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;
&lt;h2 id=&quot;resultados&quot;&gt;Resultados&lt;/h2&gt;
&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;irradianceList&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read.table&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/home/joan/multispectralcam/decode.csv&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;header&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sep&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;,&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;knitr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;irradianceList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;Como se puede apreciar, aparecen muchas filas de datos, sin embargo solo necesitamos 1, la última obtenida por imagen. Las filas pueden variar según la imagen, esto es debido a que parece que la cámara guarda información a 5Hz.&lt;/p&gt;
</description>
        <pubDate>Fri, 01 Sep 2017 00:00:00 +0200</pubDate>
        <link>http://localhost:4000/remote_sensing/2017/09/01/decode.html</link>
        <guid isPermaLink="true">http://localhost:4000/remote_sensing/2017/09/01/decode.html</guid>
        
        
        <category>remote_sensing</category>
        
      </item>
    
      <item>
        <title>Obtención de datos mediante HTTP-API de la cámara Parrot Sequoia</title>
        <description>&lt;p&gt;A continuación, muestro una manera sencilla de conectarse y exportar datos del sensor &lt;em&gt;Sunshine&lt;/em&gt;.&lt;/p&gt;

&lt;h3 id=&quot;los-interfaces-de-la-sequoia&quot;&gt;Los interfaces de la Sequoia&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;HTTP-API&lt;/li&gt;
  &lt;li&gt;PTP (Picture Transfer Protocol)&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;vía-http-control-api&quot;&gt;Vía HTTP Control API&lt;/h4&gt;

&lt;p&gt;Los datos son devueltos en formato json, a través de peticiones a la siguiente dirección:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;192.168.47.1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Las diferentes URLs a las que podemos acceder son:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;/capture&lt;/strong&gt;: para obtener el estado de captura Sequoia, iniciar y detener una captura&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;/config&lt;/strong&gt;: para obtener y configurar la configuración de las cámaras&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;/status&lt;/strong&gt;: para obtener todas las informaciones sobre el estado físico de Sequoia&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;/calibration&lt;/strong&gt;: para obtener el estado de calibración, iniciar y detener una calibración&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;/storage&lt;/strong&gt;: para obtener información sobre la memoria&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;/file&lt;/strong&gt;: para obtener información de archivos y carpetas&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;/download&lt;/strong&gt;: para descargar archivos&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;/delete&lt;/strong&gt;: para eliminar archivos y carpetas&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;/version&lt;/strong&gt;: para obtener el número de serie y la versión del software&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;/wifi&lt;/strong&gt;: para obtener el SSID Sequoia&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;/manualmode&lt;/strong&gt;: para obtener y establecer la ISO y la exposición manualmente&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;/websocket&lt;/strong&gt;: para usar notificaciones de websocket en eventos asincrónicos&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;intercambio-de-datos-de-interés&quot;&gt;Intercambio de datos de interés&lt;/h3&gt;

&lt;h4 id=&quot;status&quot;&gt;/status&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;SOLICITUD HTTP: http://192.168.47.1/status&lt;/li&gt;
  &lt;li&gt;Esta URL proporciona información sobre el estado físico de la Sequoia. Se devolverán las siguientes informaciones:
    &lt;ul&gt;
      &lt;li&gt;request&lt;/li&gt;
      &lt;li&gt;gps&lt;/li&gt;
      &lt;li&gt;instruments&lt;/li&gt;
      &lt;li&gt;sunshine&lt;/li&gt;
      &lt;li&gt;temperature &amp;gt; http://192.168.47.1/status/sunshine&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;requests&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;json&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;sequoia_ip&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'192.168.47.1'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;requests&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'http://'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sequoia_ip&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'/status'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dumps&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;indent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;data&quot;&gt;Data&lt;/h4&gt;
&lt;p&gt;Las siguientes líneas de código son en el software R. Mediante la librería rjson podremos leer de una forma más elegante y estructurada el json que nos devuelve el sensor &lt;em&gt;Sunshine&lt;/em&gt;.&lt;/p&gt;

&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rjson&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;statusValues&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fromJSON&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;~/Escritorio/Datos_Sequoia/status.json&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;statusValues&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;destapado&quot;&gt;Destapado&lt;/h4&gt;

&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;sunshineValuesOn&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fromJSON&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;~/Escritorio/Datos_Sequoia/sunhineOn.json&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sunshineValuesOn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;tapado&quot;&gt;Tapado&lt;/h4&gt;

&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;sunshineValuesOff&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fromJSON&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;~/Escritorio/Datos_Sequoia/sunhineOff.json&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sunshineValuesOff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;creamos-un-dataframe&quot;&gt;Creamos un DataFrame&lt;/h2&gt;

&lt;div class=&quot;language-R highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sunshineValuesOn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sunshineValuesOff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;json_df&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;as.data.frame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;json_df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write.table&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;json_df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;~/Escritorio/json.csv&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sep&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;,&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dec&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;,&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Sun, 13 Aug 2017 00:00:00 +0200</pubDate>
        <link>http://localhost:4000/remote_sensing/2017/08/13/conexion-Sequoia.html</link>
        <guid isPermaLink="true">http://localhost:4000/remote_sensing/2017/08/13/conexion-Sequoia.html</guid>
        
        
        <category>remote_sensing</category>
        
      </item>
    
      <item>
        <title>Pequeñas aventuras</title>
        <description>&lt;h3 id=&quot;guatemala&quot;&gt;Guatemala..&lt;/h3&gt;

&lt;p&gt;Gracias a una oportunidad de cooperación en Guatemala tuve la suerte de poder ir a enseñar cartografía a dos pequeñas comunidades rurales.&lt;/p&gt;

&lt;p&gt;La siguiente imagen es de la escuelita donde enseñé junto a mis compañeros el proyecto de OSM y lo que podía suponer para ellos, en concreto a esa comunidad y el municipio.&lt;/p&gt;

&lt;iframe width=&quot;800&quot; height=&quot;500&quot; src=&quot;../static/panos/panellum.html&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;Con unos pocos ordenadores que disponían de un SO Windows 10 de 32 bits (si, es cierto), a duras penas pudimos
arrancar JOSM, pero lo conseguimos!. Solo tienes que tener las cosas preparadas…&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Muchos USB con toda la información que puedas necesitar&lt;/li&gt;
  &lt;li&gt;Autoejecutables de JOSM&lt;/li&gt;
  &lt;li&gt;MBTiles preparados de la zona (juegas sin conexión a internet ;D)&lt;/li&gt;
  &lt;li&gt;No vas a poder descargarte la cartografía ya hecha, debes traerla de casa y llevártela una vez finalizada la sesión para poder chequearla y subirla a OSM.&lt;/li&gt;
  &lt;li&gt;Mucha paciencia. A veces los chavales tienen prisa por que el ordenador haga un proceso, y acaba colgándose.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;resultados&quot;&gt;Resultados&lt;/h3&gt;

&lt;p&gt;Aquí solo quiero dejar constancia de los avances que se han conseguido y las bondades que tiene trabajar todos para todos. Me duele no tener una imagen anterior a la cartografía que hay ahora, pero es sorprendente las actualizaciones que se han hecho y las que no paran de acerse, más si se tiene en cuenta las condiciones con las que tienen que trabajar.&lt;/p&gt;

&lt;iframe width=&quot;450&quot; height=&quot;300&quot; frameborder=&quot;0&quot; scrolling=&quot;no&quot; marginheight=&quot;0&quot; marginwidth=&quot;0&quot; src=&quot;https://www.openstreetmap.org/export/embed.html?bbox=-90.31596422195436%2C15.457568384197668%2C-90.29341220855714%2C15.470349161406482&amp;amp;layer=mapnik&amp;amp;marker=15.463958871391037%2C-90.30468821525574&quot; style=&quot;border: 1px solid black&quot;&gt;&lt;/iframe&gt;
&lt;p&gt;&lt;br /&gt;&lt;small&gt;&lt;a href=&quot;https://www.openstreetmap.org/?mlat=15.4640&amp;amp;mlon=-90.3047#map=16/15.4640/-90.3047&quot;&gt;View Larger Map&lt;/a&gt;&lt;/small&gt;&lt;/p&gt;
</description>
        <pubDate>Thu, 06 Oct 2016 00:00:00 +0200</pubDate>
        <link>http://localhost:4000/osm/2016/10/06/post-guate.html</link>
        <guid isPermaLink="true">http://localhost:4000/osm/2016/10/06/post-guate.html</guid>
        
        
        <category>OSM</category>
        
      </item>
    
      <item>
        <title>Creando visores con Leaflet</title>
        <description>&lt;h2 id=&quot;web-mapping&quot;&gt;Web mapping&lt;/h2&gt;

&lt;p&gt;Este es uno de los primeros posts que escribí cuando empecé a aprender web mapping con Leaflet.
A continuación dejo algunos visores que hice como prueba para aprender a montarlos. No he revisado el código desde hace años por lo que seguramente habrán muchas cosas a mejorar. Si vas a utilizar el código, te recomiendo que lo revises.&lt;/p&gt;

&lt;h3 id=&quot;visor-1-mapa-simple&quot;&gt;Visor 1. Mapa simple&lt;/h3&gt;

&lt;p&gt;Se trata de un visor sencillo. El mapa está centrado en Zaragoza. El objetivo es mostrar la localización de algún lugar que se quiera resaltar.&lt;/p&gt;

&lt;iframe width=&quot;700&quot; height=&quot;350&quot; frameborder=&quot;0&quot; scrolling=&quot;no&quot; marginheight=&quot;0&quot; marginwidth=&quot;0&quot; src=&quot;../../visor/zaragoza.html&quot; style=&quot;border: 1px solid black&quot;&gt;&lt;/iframe&gt;

&lt;h3 id=&quot;visor-2-zonas-de-vuelo-con-dron-zaragoza&quot;&gt;Visor 2. Zonas de vuelo con dron (Zaragoza)&lt;/h3&gt;

&lt;p&gt;Este visor lo hice cuando empecé como piloto de drones. Me encontré con el problema de que la cartografía que existía respecto a las zonas aptas para el vuelo eran de pago y en papel. Por suerte había un archivo kml que circulaba por ahí con las zonas de vuelo: &lt;a href=&quot;http://www.gisandbeers.com/radios-y-zonas-de-vuelo-para-drones&quot;&gt;puedes descargarlo de gisandbeers&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;De manera que hice el visor basándome en las áreas del kml y con un poco de &lt;a href=&quot;http://noticias.juridicas.com/base_datos/Fiscal/537921-l-18-2014-de-15-oct-medidas-urgentes-para-el-crecimiento-la-competitividad.html#t2c1s6lectura&quot;&gt;legislación. &lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Las áreas de influencia, representan las zonas donde no está permitido volar en Zaragoza&lt;/li&gt;
  &lt;li&gt;Te permite geolocalizarte con el móvil.&lt;/li&gt;
&lt;/ul&gt;

&lt;iframe width=&quot;700&quot; height=&quot;350&quot; frameborder=&quot;0&quot; scrolling=&quot;no&quot; marginheight=&quot;0&quot; marginwidth=&quot;0&quot; src=&quot;../../visor/rpa.html&quot; style=&quot;border: 1px solid black&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;Actualmente el visor está desactualizado puesto que hay una nueva ley vigente. Además, AESA ya ha creado un visor we para poder comprobar donde se va a operar o volar recreativamente.&lt;/p&gt;

&lt;h3 id=&quot;visor-3-mbtiles&quot;&gt;Visor 3. MBTiles&lt;/h3&gt;

&lt;p&gt;El siguiente visor tiene como mapa base un &lt;a href=&quot;http://wiki.openstreetmap.org/wiki/MBTiles&quot;&gt;MBTiles&lt;/a&gt;. Este tipo de formato permite almacenar un mosaicado de imágenes en un solo archivo, como una base de datos SQLite. Me gusta utilizar MBTiles, por que te permite trabajar sin conexión a internet y se mueve fino fino, además del poco espacio que ocupan las teselas.&lt;/p&gt;

&lt;iframe width=&quot;700&quot; height=&quot;450&quot; frameborder=&quot;0&quot; scrolling=&quot;no&quot; marginheight=&quot;0&quot; marginwidth=&quot;0&quot; src=&quot;../../visor/mbtiles/mbpolop.html&quot; style=&quot;border: 1px solid black&quot;&gt;&lt;/iframe&gt;

&lt;h3 id=&quot;visor-4-slider&quot;&gt;Visor 4. Slider&lt;/h3&gt;

&lt;p&gt;Puede surgir la necesidad de comparar distintas cartografías. Ello es muy sencillo en GIS de escritorio, pero cuando además s quiere compartir con muchos usuarios este tipo de visores me parecen perfectos. En este caso se comparan servicios WMS multitemporal de mi pueblo.&lt;/p&gt;

&lt;iframe width=&quot;700&quot; height=&quot;350&quot; frameborder=&quot;0&quot; scrolling=&quot;no&quot; marginheight=&quot;0&quot; marginwidth=&quot;0&quot; src=&quot;../../visor/ventanas/windows.html&quot; style=&quot;border: 1px solid black&quot;&gt;&lt;/iframe&gt;

&lt;h3 id=&quot;visor-5-geo-photos-con-flickr&quot;&gt;Visor 5. Geo Photos con Flickr&lt;/h3&gt;

&lt;p&gt;Durante mi máster, tuvimos una salida de campo en la que identificamos diferentes tipos de cubiertas y vegetación. La captura de fotos en campo ayuda a recordar que tipos de cubiertas y especies son las que componen el paisaje, pero sobretodo la localización junto a las fotofrafías ayudaron mucho en la búsqueda de píxeles que puedan ser útiles para la clasificación supervisada.&lt;/p&gt;

&lt;p&gt;La API de Flickr nos permite almacenar y geolocalizar las fotos e interactuar con ellas mediante Leaflet. Si ya tenemos las fotos geolocalizadas (tomadas con móvil o cámara) podemos geolocalizarlas directamente, y si no podemos geolocalizarlas con Flickr o un software específico; en mi caso utilizo &lt;a href=&quot;https://www.digikam.org/&quot;&gt;Digikam&lt;/a&gt;&lt;/p&gt;

&lt;iframe width=&quot;700&quot; height=&quot;350&quot; frameborder=&quot;0&quot; scrolling=&quot;no&quot; marginheight=&quot;0&quot; marginwidth=&quot;0&quot; src=&quot;../../visor/photo/photos.html&quot; style=&quot;border: 1px solid black&quot;&gt;&lt;/iframe&gt;

&lt;h3 id=&quot;visor-6-time-and-checkbox&quot;&gt;Visor 6. Time and checkbox&lt;/h3&gt;

&lt;p&gt;Este visor es más elaborado. Se trata de un visor que representa la ocupación francesa en Valencia durante los años 1812-13.&lt;/p&gt;

&lt;iframe width=&quot;800&quot; height=&quot;750&quot; frameborder=&quot;0&quot; scrolling=&quot;no&quot; marginheight=&quot;0&quot; marginwidth=&quot;0&quot; src=&quot;https://joancano.github.io/webMapping/&quot; style=&quot;border: 1px solid black&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;&lt;a href=&quot;https://joancano.github.io/webMapping/&quot;&gt;Full page&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Thu, 12 May 2016 00:00:00 +0200</pubDate>
        <link>http://localhost:4000/leaflet/2016/05/12/post-visores.html</link>
        <guid isPermaLink="true">http://localhost:4000/leaflet/2016/05/12/post-visores.html</guid>
        
        
        <category>leaflet</category>
        
      </item>
    
  </channel>
</rss>
